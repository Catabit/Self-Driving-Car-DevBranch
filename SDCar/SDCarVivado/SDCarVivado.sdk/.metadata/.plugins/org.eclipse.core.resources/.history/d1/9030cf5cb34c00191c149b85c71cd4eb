#include "powermon.h"


void Run(int fd) {
	//int16_t x, y, z;
	float current = 0, voltage = 0;

	printf("Pmon Demo Launched");

	for (int i=0; i<10; i++){
		Pmon_VoltageCurrentRead(fd, &voltage, &current);
		//readStatus(fd);
		printf("Voltage= %f      Current= %f \n");
		usleep(100000);
		SetContConversion(fd);
	}

}

void Initialize(int fd) {
	SetContConversion(fd);
	printf("Initialize worked\n");
}


int main()
{
	int fd = init();
	printf("Let's start\n");
	Initialize(fd);
	Run(fd);
	close(fd);
	return 0;
}
